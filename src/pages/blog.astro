---
import Layout from "../layouts/Layout.astro";
import PostCard from "../components/PostCard.astro";

const posts = await Astro.glob("./posts/*.md").then((posts) => {
    return posts.sort((a, b) => {
        return (
            new Date(b.frontmatter.publishedAt).valueOf() -
            new Date(a.frontmatter.publishedAt).valueOf()
        );
    });
});
---

<Layout
    title="Blog"
    description="Vaibhav's articles realted to tech and stuff he likes"
>
    <header class="my-4 mx-auto max-w-screen-lg">
        <h3 class="text-2xl">🕐 Recent Posts</h3>
    </header>
    <main
        class="max-w-screen-lg mx-auto grid grid-cols-1 md:grid-cols-2 px-4 md:px-0"
    >
        {
            posts.map((post) => {
                const { title, publishedAt, image } = post.frontmatter;
                return (
                    <PostCard
                        title={title}
                        publishedAt={publishedAt}
                        image={image}
                        url={post.url || ""}
                    />
                );
            })
        }
    </main>
</Layout>
