---
import Layout from "../../layouts/Layout.astro";
import PostCard from "../../components/PostCard.astro";

const posts = await Astro.glob("./*.md").then((posts) => {
    return posts.sort((a, b) => {
        return (
            new Date(b.frontmatter.publishedAt).valueOf() -
            new Date(a.frontmatter.publishedAt).valueOf()
        );
    });
});
---

<Layout
    title="Blog"
    description="Vaibhav's articles realted to tech and stuff he likes"
>
    <header class="my-12 mx-auto max-w-screen-lg">
        <h2 class="text-3xl">🕐 Recent Posts</h2>
    </header>
    <main
        class="max-w-screen-lg mx-auto grid grid-cols-1 gap-8 md:grid-cols-2 px-4 md:px-0"
    >
        {
            posts.map((post) => {
                // const { title, publishedAt, image } = post.frontmatter;
                return (
                    <PostCard
                        title={post.frontmatter.title}
                        publishedAt={post.frontmatter.publishedAt}
                        image={post.frontmatter.image}
                        url={post.url || ""}
                    />
                );
            })
        }
    </main>
</Layout>
